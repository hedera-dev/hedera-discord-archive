# Hash before and after transaction submission do not match

### Message 1420557088395890748
by .kheil#0 (593561522928615474)
at *2025-09-24 23:46:42.548 UTC*
**MODIFIED** last time at *2025-09-26 13:17:16.220 UTC*

I don't manage to reconcile transaction hash before and after execution.
Let say I have a transaction tx, I freeze it and compute hash using `​tx.getTransactionHash()`​, it returns a 48 bytes/96 hexits hash, let's call it pre_hash
I then submit the transaction and get receipt, from this receipt I read transactionHash attribute (call it post_hash) and notice that pre_hash != post_hash. 
What am I missing ?

---

### Message 1421122747471368314
by .kheil#0 (593561522928615474)
at *2025-09-26 13:14:26.181 UTC*

Hash before and after transaction submission do not match

---

### Message 1421143047340691507
by .kheil#0 (593561522928615474)
at *2025-09-26 14:35:06.047 UTC*

is it the appropriate channel to ask this or can you refer me to other active channel ? thanks

---

### Message 1421149051478474863
by lukeforrest_hashgraph#0 (1396895843923005653)
at *2025-09-26 14:58:57.545 UTC*

Hi <@593561522928615474> - Could you please share the code that you are referring to please?

---

### Message 1421153129650585651
by .kheil#0 (593561522928615474)
at *2025-09-26 15:15:09.857 UTC*
**MODIFIED** last time at *2025-09-26 15:15:57.005 UTC*
in reply to [1421149051478474863](#1421149051478474863)

Sure please find below using the hiero js sdk:
`​// prepare transaction
let transaction = new TransferTransaction()
                  .addTokenTransfer(token_id, sender_account_id, -tiny_token_amount)
                  .addTokenTransfer(token_id, receiver_account_id, tiny_token_amount)
                  .setTransactionMemo('test')
transaction.freezeWith(client)
let transaction_hash = await transaction.getTransactionHash()
let pre_hash_hex = "0x" + Buffer.from(transaction_hash).toString("hex");

// execute transaction
const tx_response = await transaction.execute(client, timeout)
let post_hash_hex = "0x" + Buffer.from(tx_response.transactionHash).toString("hex")

console.log(pre_hash_hex)  // '0xcf9da1aafa66b6202382353b988c643b7414d6506c950bae6bf10bb4053c0f37fd9ad22b3b06f64df152f9ac7187eff0'
console.log(post_hash_hex) // '0x16df7d84149d12cf52461d22dde54170d06a042efd359d92e956aa94b4aea9cf720b4df3c987ddbf8627ad1e9c5baf7e'    `​

---

### Message 1422576758380695572
by .kheil#0 (593561522928615474)
at *2025-09-30 13:32:09.396 UTC*

any idea ?

---

### Message 1422921986077622384
by phasmatis#0 (255000116388167680)
at *2025-10-01 12:23:58.093 UTC*

Hey, so it looks like you hashed a different byte-payload than the one that was submitted, could you try with the following code:

`​`​`​ // build
let tx = new TransferTransaction()
  .addTokenTransfer(tokenId, sender, -amount)
  .addTokenTransfer(tokenId, receiver, amount)
  .setTransactionMemo("test")
  .freezeWith(client);

// sign *before* hashing
tx = await tx.signWithOperator(client); 

// now this is the same payload that will be submitted
const preHashHex = "0x" + Buffer.from(await tx.getTransactionHash()).toString("hex");

// execute
const res = await tx.execute(client);
const postHashHex = "0x" + Buffer.from(res.transactionHash).toString("hex");

// preHashHex === postHashHex
`​`​`​

---

### Message 1422935183199440926
by .kheil#0 (593561522928615474)
at *2025-10-01 13:16:24.532 UTC*
in reply to [1422921986077622384](#1422921986077622384)

Thank you very much that was it

---

